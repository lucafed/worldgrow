<!doctype html>
<html lang="it">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>Worldgrow ‚Äî Il tuo Mondo</title>
  <link rel="stylesheet" href="./style.css?v=1.0" />
</head>

<body>
  <div class="wrap">
    <header class="top">
      <div>
        <div class="title">
          <div class="dot"></div>
          <div class="h1">Il tuo<br/>Mondo</div>
        </div>
        <div class="sub" id="subtitle">Nuovo compito: fai 2 foto (inizio + fine).</div>
      </div>

      <div class="counters">
        <div class="pill"><span class="ico">‚ö°</span><span id="energy">0</span></div>
        <div class="pill"><span class="ico">üåç</span><span id="world">0</span></div>
      </div>
    </header>

    <section class="card">
      <!-- STAGE: idle / armed / event -->
      <div class="stage idle" id="stage" aria-label="Scena">
        <img class="sceneImg" id="sceneImg" src="./assets/scene_def_v1.png" alt="Scena" />

        <div class="fireflies"></div>

        <!-- overlay evento -->
        <div class="portal" id="portal"></div>
        <div class="growthThing" id="growthThing"></div>
        <div class="flash" id="flash"></div>
        <div class="pop" id="pop"></div>

        <!-- PERSONAGGI (SVG) -->
        <!-- GOBLIN STRAMBO -->
        <svg class="char gobo" id="gobo" viewBox="0 0 260 260" aria-label="Gobo">
          <!-- shadow -->
          <ellipse class="sh" cx="130" cy="232" rx="64" ry="16"></ellipse>

          <!-- legs -->
          <path class="leg" d="M95 185 L82 230" />
          <path class="leg" d="M150 185 L168 230" />
          <path class="foot" d="M70 230 C85 244, 105 244, 118 234 C103 230, 89 226, 70 230 Z"/>
          <path class="foot" d="M155 234 C170 246, 195 244, 210 232 C190 226, 176 228, 155 234 Z"/>

          <!-- body -->
          <path class="body" d="M65 95 C55 165, 85 205, 130 205 C180 205, 206 160, 195 98
                               C188 58, 160 40, 130 44 C102 48, 72 56, 65 95 Z"/>
          <path class="belly" d="M95 120 C92 158, 110 186, 132 186 C158 186, 170 156, 167 120
                                 C162 98, 142 92, 130 92 C114 92, 98 100, 95 120 Z"/>

          <!-- ears (una pi√π lunga e storta) -->
          <path class="ear" d="M70 92 C35 80, 30 50, 55 45 C78 40, 88 64, 82 86 Z"/>
          <path class="ear" d="M190 92 C230 78, 238 55, 220 44 C200 32, 178 56, 182 84 Z"/>

          <!-- arms (una lunga ‚Äúmolla‚Äù) -->
          <path class="leg" id="goboArmL" d="M78 140 C45 150, 40 170, 62 178" />
          <path class="leg" id="goboArmR" d="M182 140 C214 150, 224 170, 204 184" />

          <!-- face -->
          <g class="eyes" id="goboEyes">
            <ellipse class="eyeW" cx="110" cy="110" rx="28" ry="24"></ellipse>
            <ellipse class="eyeW" cx="156" cy="110" rx="30" ry="24"></ellipse>

            <circle class="pupil" id="goboP1" cx="118" cy="114" r="8"></circle>
            <circle class="pupil" id="goboP2" cx="146" cy="114" r="8"></circle>

            <path class="lid" d="M88 103 Q110 88 132 103" />
            <path class="lid" d="M132 103 Q156 88 180 103" />
          </g>

          <path class="mouth" d="M105 150 Q132 168 165 146" />
          <path class="tooth" d="M118 156 L128 170 L136 154 Z"/>
          <circle cx="172" cy="130" r="6" fill="rgba(0,0,0,.18)"></circle>
        </svg>

        <!-- BUNNY NUVOLA STRANA -->
        <svg class="char floof" id="floof" viewBox="0 0 280 280" aria-label="Floof">
          <ellipse class="sh" cx="150" cy="240" rx="68" ry="16"></ellipse>

          <!-- ears (una piegata) -->
          <path class="flEar" d="M92 80 C78 40, 104 18, 126 34 C150 52, 130 82, 112 94 Z"/>
          <path class="flEar" d="M178 88 C164 44, 198 14, 224 40 C246 62, 224 98, 200 108 Z"/>

          <!-- body (nuvola) -->
          <path class="flBody"
                d="M72 140
                   C60 116, 76 92, 104 94
                   C112 76, 132 62, 156 70
                   C176 54, 210 62, 216 92
                   C244 96, 256 120, 242 142
                   C260 162, 246 192, 220 190
                   C210 214, 180 226, 154 212
                   C132 232, 92 226, 86 198
                   C60 192, 48 164, 72 140 Z"/>

          <!-- legs -->
          <path class="flLeg" d="M112 206 L102 236" />
          <path class="flLeg" d="M178 206 L188 236" />
          <path class="flFoot" d="M88 236 C104 250, 126 250, 140 240 C120 234, 104 232, 88 236 Z"/>
          <path class="flFoot" d="M150 240 C166 252, 196 250, 212 236 C190 232, 170 234, 150 240 Z"/>

          <!-- face (occhi diversi: uno grande uno piccolo) -->
          <circle class="flEye" id="flEyeBig" cx="122" cy="150" r="13"></circle>
          <circle class="flEye" id="flEyeSmall" cx="172" cy="152" r="9"></circle>
          <circle class="blush" cx="104" cy="168" r="14"></circle>
          <circle class="blush" cx="194" cy="170" r="14"></circle>
          <path class="flMouth" d="M126 178 Q148 192 170 176" />
        </svg>

      </div>

      <div class="controls">
        <button class="btn primary" id="btnSnap">üì∏ Foto compito</button>
        <button class="btn" id="btnNew">Nuovo compito</button>
        <button class="btn ghost" id="btnDemo">‚ñ∂ Demo</button>
        <div class="footTxt">Regola MVP: <b>2 foto = qualcosa cambia</b>.</div>

        <input id="camera" type="file" accept="image/*" capture="environment" style="display:none" />
      </div>
    </section>
  </div>

  <script src="./app.js?v=1.0"></script>
</body>
</html>
