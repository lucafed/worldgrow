:root{
  --bg:#0a1412;
  --surface:rgba(255,255,255,.06);
  --stroke:rgba(255,255,255,.12);
  --text:#eaf5f1;
  --muted:#9fbdb4;
  --acc:#6ee7c8;
}

*{box-sizing:border-box}
body{
  margin:0;
  background:
    radial-gradient(900px 700px at 30% 10%, rgba(110,231,200,.18), transparent 60%),
    var(--bg);
  color:var(--text);
  font-family:system-ui, sans-serif;
}

.wrap{max-width:560px;margin:auto;padding:16px}
.card{
  background:var(--surface);
  border:1px solid var(--stroke);
  border-radius:18px;
  padding:14px;
}

/* HEADER */
.header{display:flex;gap:10px;align-items:center}
.dot{width:12px;height:12px;border-radius:50%;background:var(--acc)}
.title{flex:1}
.title h1{margin:0;font-size:22px}
.title p{margin:2px 0 0;color:var(--muted)}
.stats{display:flex;gap:10px}
.badge{
  padding:8px 12px;
  border-radius:999px;
  background:rgba(0,0,0,.25);
  border:1px solid var(--stroke);
  font-weight:800;
}

/* SCENA */
.stageWrap{
  margin-top:12px;
  border-radius:18px;
  overflow:hidden;
  border:1px solid var(--stroke);
}
.stage{
  position:relative;
  width:100%;
  aspect-ratio:9/12;
  overflow:hidden;
}
.bg{
  position:absolute;inset:0;
  background:
    linear-gradient(180deg,#14322d,#0a1412 70%);
}
.fog{
  position:absolute;inset:0;
  background:radial-gradient(circle at 50% 40%, rgba(255,255,255,.15), transparent 60%);
  animation:fog 6s ease-in-out infinite;
}
@keyframes fog{
  0%,100%{opacity:.25}
  50%{opacity:.45}
}

/* PORTA */
.door{
  position:absolute;
  left:10%;top:42%;
  width:26%;height:36%;
  background:linear-gradient(180deg,#7a4a1f,#3e2410);
  border-radius:14px 14px 22px 22px;
  border:1px solid rgba(255,255,255,.18);
  transform-origin:left center;
}
.portal{
  position:absolute;
  left:38%;top:45%;
  width:22%;height:32%;
  border-radius:50%;
  opacity:0;
  background:conic-gradient(from 0deg,#63a7ff,#6ee7c8,#63a7ff);
}

/* PERSONAGGI */
.char{position:absolute;pointer-events:none}

/* GUARDIANO */
.guardian{
  left:34%;top:64%;
  width:110px;height:110px;
  animation:idleBob 2.4s ease-in-out infinite;
}
.g-body{
  position:absolute;inset:20px;
  border-radius:26px;
  background:linear-gradient(180deg,#7fe7b9,#1f7e65);
}
.g-eye{
  position:absolute;
  top:44px;width:14px;height:14px;
  border-radius:50%;
  background:white;
}
.g-eye.left{left:42px}
.g-eye.right{right:42px}
.g-mouth{
  position:absolute;
  top:66px;left:50%;
  width:26px;height:10px;
  transform:translateX(-50%);
  background:rgba(0,0,0,.35);
  border-radius:0 0 12px 12px;
}
.shadow{
  position:absolute;
  bottom:-10px;left:50%;
  width:70px;height:14px;
  transform:translateX(-50%);
  background:rgba(0,0,0,.4);
  border-radius:50%;
}

/* WATCHER */
.watcher{
  right:10%;top:58%;
  width:90px;height:90px;
  animation:watch 3s ease-in-out infinite;
}
.w-core{
  position:absolute;inset:22px;
  background:#63a7ff;
  border-radius:50%;
}
.w-ring{
  position:absolute;inset:0;
  border:2px dashed rgba(255,255,255,.4);
  border-radius:50%;
  animation:spin 4s linear infinite;
}
@keyframes spin{to{transform:rotate(360deg)}}
@keyframes watch{
  0%,100%{transform:translateY(0)}
  50%{transform:translateY(-6px)}
}

/* STATI */
.stage.armed .door{
  animation:pulse 1.2s infinite;
}
@keyframes pulse{
  0%,100%{filter:brightness(1)}
  50%{filter:brightness(1.3)}
}
.stage.event .door{
  transform:perspective(600px) rotateY(-30deg);
}
.stage.event .portal{
  opacity:1;
  animation:spin .8s linear infinite;
}
.stage.event .guardian{
  animation:jump .6s ease-out 1;
}
@keyframes jump{
  0%{transform:translateY(0)}
  50%{transform:translateY(-18px)}
  100%{transform:translateY(0)}
}

/* POP + FLASH */
.flash{
  position:absolute;inset:0;
  background:rgba(255,255,255,.25);
  opacity:0;
}
.stage.event .flash{opacity:1}
.pop{
  position:absolute;
  top:10%;left:50%;
  transform:translateX(-50%);
  background:rgba(0,0,0,.4);
  padding:10px 14px;
  border-radius:14px;
  opacity:0;
}
.pop.show{opacity:1}

/* CONTROLLI */
.controls{margin-top:14px;display:grid;gap:10px}
.btn{
  height:52px;border-radius:14px;
  background:rgba(0,0,0,.25);
  border:1px solid var(--stroke);
  color:var(--text);
  font-weight:800;
}
.btn.primary{
  background:linear-gradient(180deg,#6ee7c8,#3bbfa3);
  color:#05302a;
}
.btn.ghost{opacity:.7}
.hint{text-align:center;color:var(--muted)}
